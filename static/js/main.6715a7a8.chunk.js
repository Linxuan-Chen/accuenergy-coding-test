(this["webpackJsonpaccuenergy-coding-test"]=this["webpackJsonpaccuenergy-coding-test"]||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n(1),c=n(8),i=n.n(c),s=(n(15),n(16),n(3)),r=n(4),l=n(6),d=n(5),u=n(2),m=n.n(u);function p(e){return Object(o.jsxs)("div",{className:m.a.map_wrapper,children:[Object(o.jsx)("div",{className:"clear-float",children:Object(o.jsx)("div",{className:m.a.input_group,children:e.children})}),Object(o.jsx)("div",{id:"map",style:e.mapStyle})]})}function h(e){return Object(o.jsx)("article",{children:e.children})}var g,f,w,j,y,L,b="AIzaSyDN6-LfGwkjKY4nq9i0BZaWISOAs_criwI",v={lat:43.774350125384466,lng:-79.32607679210997},S={width:"100%",height:"100%"},O=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var o;return Object(s.a)(this,n),(o=t.call(this,e)).state={utcTimeStamp:Math.round(new Date/1e3),selectedLocation:v,previousSelectedLocation:v,selectedLocationTime:null,selectedLocationTimeZoneName:""},o.getTimeZone=function(){fetch("https://maps.googleapis.com/maps/api/timezone/json?location=".concat(o.state.selectedLocation.lat,",").concat(o.state.selectedLocation.lng,"&timestamp=").concat(o.state.utcTimeStamp,"&key=").concat(o.props.myAPIKey)).then((function(e){return e.json()})).then((function(e){o.setState({selectedLocationTime:e.dstOffset+e.rawOffset+o.state.utcTimeStamp,selectedLocationTimeZoneName:e.timeZoneName}),"ZERO_RESULTS"===e.status&&alert("No time zone data could be found for the specified position or time. Confirm that the request is for a location on land, and not over water.")})).catch((function(){alert("Fail to get a response from google time zone API. Please check your network and try again.")}))},o}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;g=setInterval((function(){e.setState({utcTimeStamp:e.state.utcTimeStamp+1})}),1e3),this.state.selectedLocation&&(this.getTimeZone(),f=setInterval((function(){e.setState({selectedLocationTime:e.state.selectedLocationTime+1})}),1e3))}},{key:"componentDidUpdate",value:function(){this.setState({previousSelectedLocation:this.state.selectedLocation,selectedLocation:this.props.selectedLocation}),this.state.previousSelectedLocation.lat!==this.state.selectedLocation.lat&&this.state.previousSelectedLocation.lng!==this.state.selectedLocation.lng&&this.getTimeZone()}},{key:"componentWillUnmount",value:function(){clearInterval(g),clearInterval(f)}},{key:"render",value:function(){return Object(o.jsxs)(h,{children:[Object(o.jsxs)("section",{children:["UTC Time: \xa0",new Date(1e3*this.state.utcTimeStamp).toUTCString().replace("GMT","(Coordinated Universal Time)")]}),Object(o.jsxs)("section",{children:["Selected Location Time:\xa0",new Date(new Date(1e3*this.state.selectedLocationTime)).toUTCString().replace("GMT","(".concat(this.state.selectedLocationTimeZoneName,")"))]})]})}}]),n}(a.PureComponent),k=new(n(9).a)({apiKey:b,language:"English"}),C=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var o;return Object(s.a)(this,n),(o=t.call(this,e)).onSearchClick=function(){""!==o.state.searchKeyword&&(j.setMap(null),y.geocode({address:o.state.searchKeyword},(function(e,t){"OK"===t?(j=new window.google.maps.Marker({position:e[0].geometry.location,map:w}),w.setCenter(e[0].geometry.location),(L=new window.google.maps.InfoWindow({content:e[0].formatted_address})).open(w,j),o.setState({selectedLocation:{lat:e[0].geometry.location.lat(),lng:e[0].geometry.location.lng()}})):alert("Didn't get response about current keyword from google map server. Please check you network or change another keyword and try again.")})))},o.onKeyUpHandler=function(e){13===e.keyCode&&o.onSearchClick()},o.onSearchKeywordChange=function(e){o.setState({searchKeyword:e.target.value})},o.onYourLocationClick=function(){j.setMap(null),y.geocode({latLng:o.state.clientLocation},(function(e,t){"OK"===t?(w.setCenter(o.state.clientLocation),o.setState({selectedLocation:o.state.clientLocation}),j=new window.google.maps.Marker({position:o.state.clientLocation,map:w}),(L=new window.google.maps.InfoWindow({content:"\n            <h3>Your Location</h3>\n            <p>".concat(e[0].formatted_address,"</p>\n            ")})).open(w,j),j.addListener("click",(function(){L.open(w,j)}))):alert("Didn't get response about client location from google map server. Please enable location services on your browser first and try again.")}))},o.state={markerPosition:v,searchKeyword:"",clientLocation:null,selectedLocation:v},o}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;k.load().then((function(){w=new window.google.maps.Map(document.getElementById("map"),{center:v,zoom:15}),(j=new window.google.maps.Marker({position:e.state.markerPosition,map:w})).addListener("click",(function(){L.open(w,j)})),y=new window.google.maps.Geocoder,(L=new window.google.maps.InfoWindow({content:"2 Lansing Square #700, North York, ON M2J 4P8, Canada"})).open(w,j)})),navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(t){e.setState({clientLocation:{lat:t.coords.latitude,lng:t.coords.longitude}})}))}},{key:"render",value:function(){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(O,{selectedLocation:this.state.selectedLocation,myAPIKey:b}),Object(o.jsxs)(p,{mapStyle:S,onSearchClick:this.onSearchClick,onSearchKeywordChange:this.onSearchKeywordChange,children:[Object(o.jsx)("input",{className:m.a.search_box,type:"text",onChange:this.onSearchKeywordChange,onKeyUp:this.onKeyUpHandler}),Object(o.jsx)("button",{className:m.a.buttons,onClick:this.onSearchClick,children:"Search"}),Object(o.jsx)("button",{className:m.a.buttons,onClick:this.onYourLocationClick,children:"Your Location"}),Object(o.jsx)("div",{children:this.state.utcTime})]})]})}}]),n}(a.PureComponent);var T=function(){return Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)("header",{className:"title",children:"Accuenergy Pre-interview Coding Test"}),Object(o.jsx)(C,{})]})},x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,o=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),o(e),a(e),c(e),i(e)}))};i.a.render(Object(o.jsx)(T,{}),document.getElementById("root")),x()},2:function(e,t,n){e.exports={input_group:"Map_input_group__2O1aP",search_box:"Map_search_box__3x809",buttons:"Map_buttons__32xMm",map_wrapper:"Map_map_wrapper__1qWPx"}}},[[17,1,2]]]);
//# sourceMappingURL=main.6715a7a8.chunk.js.map